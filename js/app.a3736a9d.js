(function(e){function t(t){for(var n,i,s=t[0],c=t[1],u=t[2],l=0,b=[];l<s.length;l++)i=s[l],r[i]&&b.push(r[i][0]),r[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);h&&h(t);while(b.length)b.shift()();return o.push.apply(o,u||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,i=1;i<a.length;i++){var s=a[i];0!==r[s]&&(n=!1)}n&&(o.splice(t--,1),e=c(c.s=a[0]))}return e}var n={},i={app:0},r={app:0},o=[];function s(e){return c.p+"js/"+({about:"about"}[e]||e)+"."+{about:"7b3be9b3"}[e]+".js"}function c(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(e){var t=[],a={about:1};i[e]?t.push(i[e]):0!==i[e]&&a[e]&&t.push(i[e]=new Promise(function(t,a){for(var n="css/"+({about:"about"}[e]||e)+"."+{about:"b06dc82c"}[e]+".css",r=c.p+n,o=document.getElementsByTagName("link"),s=0;s<o.length;s++){var u=o[s],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===n||l===r))return t()}var b=document.getElementsByTagName("style");for(s=0;s<b.length;s++){u=b[s],l=u.getAttribute("data-href");if(l===n||l===r)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var n=t&&t.target&&t.target.src||r,o=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");o.request=n,delete i[e],h.parentNode.removeChild(h),a(o)},h.href=r;var m=document.getElementsByTagName("head")[0];m.appendChild(h)}).then(function(){i[e]=0}));var n=r[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise(function(t,a){n=r[e]=[t,a]});t.push(n[2]=o);var u,l=document.getElementsByTagName("head")[0],b=document.createElement("script");b.charset="utf-8",b.timeout=120,c.nc&&b.setAttribute("nonce",c.nc),b.src=s(e),u=function(t){b.onerror=b.onload=null,clearTimeout(h);var a=r[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src,o=new Error("Loading chunk "+e+" failed.\n("+n+": "+i+")");o.type=n,o.request=i,a[1](o)}r[e]=void 0}};var h=setTimeout(function(){u({type:"timeout",target:b})},12e4);b.onerror=b.onload=u,l.appendChild(b)}return Promise.all(t)},c.m=e,c.c=n,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(a,n,function(t){return e[t]}.bind(null,n));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/add-typescript-to-vue/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var b=0;b<u.length;b++)t(u[b]);var h=l;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"21bb":function(e,t,a){"use strict";var n=a("bcc9"),i=a.n(n);i.a},2423:function(e,t,a){"use strict";var n=a("c70f"),i=a.n(n);i.a},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("097d");var n=a("2b0e"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("div",{attrs:{id:"nav"}},[a("router-link",{attrs:{to:"/"}},[e._v("Home")]),e._v("\n      "+e._s(" ")+"|\n      "),a("router-link",{attrs:{to:"/about"}},[e._v("About")])],1),a("router-view")],1)},r=[],o=(a("5c0b"),a("2877")),s={},c=Object(o["a"])(s,i,r,!1,null,null,null);c.options.__file="App.vue";var u=c.exports,l=a("8c4f"),b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("h1",{staticClass:"home__header"},[e._v("Search for Greenhouse Gas Emissions by City")]),a("Search")],1)},h=[],m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search"},[a("SearchBar",{attrs:{cities:e.cities},on:{cityAdded:e.addCity}}),a("SearchResultChart",{attrs:{cities:e.cities},on:{cityDeleted:e.deleteCity}})],1)},v=[],d=(a("f751"),a("7514"),a("be94")),p=a("2f62"),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search-bar"},[a("div",{staticClass:"form-control"},[a("label",{staticClass:"form-control__label",attrs:{for:"city"}},[e._v("City")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.input.city,expression:"input.city",modifiers:{trim:!0}}],staticClass:"form-control__input",attrs:{type:"text",id:"city",placeholder:e.placeholder},domProps:{value:e.input.city},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.attemptSearch(t):null},input:[function(t){t.target.composing||e.$set(e.input,"city",t.target.value.trim())},e.isValidInput],blur:function(t){e.$forceUpdate()}}})]),a("div",{staticClass:"form-control"},[a("label",{staticClass:"form-control__label",attrs:{for:"state"}},[e._v("State")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.input.state,expression:"input.state"}],staticClass:"form-control__select",attrs:{name:"state",id:"state"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.input,"state",t.target.multiple?a:a[0])},e.isValidInput],keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.attemptSearch(t):null}}},e._l(e.states,function(t){return a("option",{key:t.abbreviation,domProps:{value:t.abbreviation}},[e._v(e._s(t.abbreviation))])}))]),a("button",{staticClass:"form-button",on:{click:e.attemptSearch}},[e._v("Get Emissions Data")]),a("br"),e.errorMessage?a("span",{staticClass:"error-message"},[e._v(e._s(e.errorMessage))]):e._e()])},g=[],y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"residential",a=e.residential.total_pop,n=e[t],i=n.elec_lb_ghg,r=n.gas_lb_ghg,o=Math.round((i+r)/a);return o},_=function(e,t){return e.ghg/t},C=function(e,t){return(e.ghg-t)/t},A=(a("28a5"),function(e){return e.toLowerCase().split(" ").map(function(e){return e.charAt(0).toUpperCase()+e.substring(1)}).join(" ")}),M=a("bc3a"),S=a.n(M),N="https://developer.nrel.gov/api/cleap/v1",O="DEMO_KEY",w="aWcNiqkAVeFiCXyjO4p6QwNzMDnTxd2VTOmTMwtn",k=function(e,t){var a="energy_expenditures_and_ghg_by_sector",n=encodeURIComponent(e),i=encodeURIComponent(t);return S.a.get("".concat(N,"/").concat(a)+"?city=".concat(n)+"&state_abbr=".concat(i)+"&api_key=".concat(w||O))},j=function(){var e="electricity_and_gas_stats";return S.a.get("".concat(N,"/").concat(e)+"?api_key=".concat(w||O))},I=[{name:"Alabama",abbreviation:"AL"},{name:"Alaska",abbreviation:"AK"},{name:"American Samoa",abbreviation:"AS"},{name:"Arizona",abbreviation:"AZ"},{name:"Arkansas",abbreviation:"AR"},{name:"California",abbreviation:"CA"},{name:"Colorado",abbreviation:"CO"},{name:"Connecticut",abbreviation:"CT"},{name:"Delaware",abbreviation:"DE"},{name:"District Of Columbia",abbreviation:"DC"},{name:"Federated States Of Micronesia",abbreviation:"FM"},{name:"Florida",abbreviation:"FL"},{name:"Georgia",abbreviation:"GA"},{name:"Guam",abbreviation:"GU"},{name:"Hawaii",abbreviation:"HI"},{name:"Idaho",abbreviation:"ID"},{name:"Illinois",abbreviation:"IL"},{name:"Indiana",abbreviation:"IN"},{name:"Iowa",abbreviation:"IA"},{name:"Kansas",abbreviation:"KS"},{name:"Kentucky",abbreviation:"KY"},{name:"Louisiana",abbreviation:"LA"},{name:"Maine",abbreviation:"ME"},{name:"Marshall Islands",abbreviation:"MH"},{name:"Maryland",abbreviation:"MD"},{name:"Massachusetts",abbreviation:"MA"},{name:"Michigan",abbreviation:"MI"},{name:"Minnesota",abbreviation:"MN"},{name:"Mississippi",abbreviation:"MS"},{name:"Missouri",abbreviation:"MO"},{name:"Montana",abbreviation:"MT"},{name:"Nebraska",abbreviation:"NE"},{name:"Nevada",abbreviation:"NV"},{name:"New Hampshire",abbreviation:"NH"},{name:"New Jersey",abbreviation:"NJ"},{name:"New Mexico",abbreviation:"NM"},{name:"New York",abbreviation:"NY"},{name:"North Carolina",abbreviation:"NC"},{name:"North Dakota",abbreviation:"ND"},{name:"Northern Mariana Islands",abbreviation:"MP"},{name:"Ohio",abbreviation:"OH"},{name:"Oklahoma",abbreviation:"OK"},{name:"Oregon",abbreviation:"OR"},{name:"Palau",abbreviation:"PW"},{name:"Pennsylvania",abbreviation:"PA"},{name:"Puerto Rico",abbreviation:"PR"},{name:"Rhode Island",abbreviation:"RI"},{name:"South Carolina",abbreviation:"SC"},{name:"South Dakota",abbreviation:"SD"},{name:"Tennessee",abbreviation:"TN"},{name:"Texas",abbreviation:"TX"},{name:"Utah",abbreviation:"UT"},{name:"Vermont",abbreviation:"VT"},{name:"Virgin Islands",abbreviation:"VI"},{name:"Virginia",abbreviation:"VA"},{name:"Washington",abbreviation:"WA"},{name:"West Virginia",abbreviation:"WV"},{name:"Wisconsin",abbreviation:"WI"},{name:"Wyoming",abbreviation:"WY"}],x={name:"SearchBar",props:{cities:{type:Array,required:!0}},data:function(){return{input:{city:"",state:""},states:I,placeholder:"Enter City",errorMessage:"",submitAttempted:!1}},methods:{attemptSearch:function(){var e=this;this.isValidSubmit()&&k(this.input.city,this.input.state).then(function(t){var a=e.generateCityResponse(t);a?(e.emitCityAdded(a),e.clearInput()):e.errorMessage="No energy usage found for this city - please try again"}).catch(function(){e.errorMessage="No energy usage found for this city - please try again"})},isValidInput:function(){return this.submitAttempted?(this.input.city=this.input.city.trim(),this.input.city&&this.input.state?2!==this.input.state.length?(this.errorMessage="Please enter a valid state",!1):(this.errorMessage="",!0):(this.errorMessage="Please enter a city & state",!1)):(this.errorMessage="",!0)},isValidSubmit:function(){if(this.submitAttempted=!0,!this.isValidInput())return!1;var e=this.generateCityStateSlug(),t=e.slug,a=!!this.cities.find(function(e){return e.slug===t});return a?(this.errorMessage="City is already in results. Try searching for something new?",!1):(this.errorMessage="",!0)},generateCityStateSlug:function(){var e=this.input,t=e.city,a=e.state,n=t.toLowerCase(),i=A(n),r="".concat(n,"-").concat(a);return{lowerCaseCity:n,capitalizedCity:i,state:a,slug:r}},generateCityResponse:function(e){if(null!=e.data){var t=this.generateCityStateSlug(),a=t.capitalizedCity,n=t.state,i=t.slug;if(e.data.result&&e.data.result[a]){var r=e.data.result[a];return{slug:i,name:a,state:n,ghg:y(r)}}}},emitCityAdded:function(e){this.$emit("cityAdded",e)},clearInput:function(){this.input.city="",this.input.state="",this.errorMessage="",this.submitAttempted=!1}}},E=x,G=(a("c2c9"),Object(o["a"])(E,f,g,!1,null,null,null));G.options.__file="SearchBar.vue";var T=G.exports,P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h3",[e._v("annual lbs of greenhouse gases (GHG) per capita")]),a("transition-group",{attrs:{name:"search-result-chart",tag:"ul"}},e._l(e.sortedCities,function(t){return a("SearchResultChartItem",{key:t.slug,staticClass:"search-result-chart__item",attrs:{city:t,"cities-max-ghg":e.citiesMaxGhg},on:{cityDeleted:e.deleteCity}})}),1)],1)},R=[],D=(a("55dd"),a("5df3"),a("1c4c"),a("2909")),V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",{staticClass:"search-result-chart-item",class:e.generateClass,style:e.generateStyle},[a("span",{staticClass:"item-label"},[e._v(e._s(e.label))]),a("span",{staticClass:"item-ghg"},[e._v(e._s(e.displayGhg))]),e.isNational?e._e():a("span",{staticClass:"delete-button",on:{click:e.deleteCity}},[a("span",[e._v("X")])])])},$=[],W=(a("7f7f"),a("c5f6"),"80vw"),B={name:"SearchResultChartItem",props:{city:{type:Object,required:!0},citiesMaxGhg:{type:Number,required:!0},isNationalAverage:{type:Boolean,required:!1,default:!1}},computed:Object(d["a"])({},Object(p["c"])("national",["nationalAverageGhg"]),{generateClass:function(){var e=.1,t=C(this.city,this.nationalAverageGhg);return t<-e?"significantly-below-average":t<=-e&&t<0?"slightly-below-average":t>0&&t<=e?"slightly-above-average":t>e?"significantly-above-average":""},generateStyle:function(){return{width:"calc(".concat(W," * ").concat(_(this.city,this.citiesMaxGhg),")")}},label:function(){return this.city.state?"".concat(this.city.name,", ").concat(this.city.state):this.city.name},displayGhg:function(){return"".concat(this.city.ghg," lbs")},isNational:function(){return"national"===this.city.slug}}),methods:{deleteCity:function(){this.$emit("cityDeleted",this.city.slug)}}},H=B,L=(a("2423"),Object(o["a"])(H,V,$,!1,null,"8266fbbe",null));L.options.__file="SearchResultChartItem.vue";var q=L.exports,K={name:"SearchResultChart",components:{SearchResultChartItem:q},props:{cities:{type:Array,required:!0}},computed:Object(d["a"])({},Object(p["c"])("national",["nationalAverageGhg"]),{citiesMaxGhg:function(){var e=this.cities.map(function(e){return e.ghg});return Math.max.apply(Math,Object(D["a"])(e))},sortedCities:function(){var e=Array.from(this.cities);return e.sort(function(e,t){return e.ghg-t.ghg})}}),methods:{deleteCity:function(e){this.$emit("cityDeleted",e)}}},U=K,F=(a("e4ce"),Object(o["a"])(U,P,R,!1,null,"f668d38a",null));F.options.__file="SearchResultChart.vue";var Y=F.exports,z={slug:"national",name:"National Average",ghg:null},J={name:"Search",components:{SearchBar:T,SearchResultChart:Y},data:function(){return{cities:[]}},computed:Object(d["a"])({},Object(p["d"])("national",["nationalAverages"]),Object(p["c"])("national",["nationalAverageGhg"])),watch:{nationalAverageGhg:function(){this.cities.find(function(e){return"national"===e.slug})||this.cities.push(Object.assign(z,{ghg:this.nationalAverageGhg}))}},methods:Object(d["a"])({},Object(p["b"])("national",["fetchNationalAverages"]),{addCity:function(e){this.cities.push(e)},deleteCity:function(e){this.cities=this.cities.filter(function(t){return t.slug!==e})}}),mounted:function(){null==this.nationalAverages&&this.fetchNationalAverages()}},X=J,Q=(a("7ebe"),Object(o["a"])(X,m,v,!1,null,"732c8995",null));Q.options.__file="Search.vue";var Z=Q.exports,ee={name:"home",components:{Search:Z}},te=ee,ae=(a("21bb"),Object(o["a"])(te,b,h,!1,null,null,null));ae.options.__file="Home.vue";var ne=ae.exports;n["a"].use(l["a"]);var ie=new l["a"]({mode:"history",base:"/add-typescript-to-vue/",routes:[{path:"/",name:"home",component:ne},{path:"/about",name:"about",component:function(){return a.e("about").then(a.bind(null,"f820"))}}]}),re=4542.3/3,oe=120.04,se={nationalAverages:null},ce={nationalAverageGhg:function(e){if(null==e.nationalAverages)return null;var t=e.nationalAverages.residential.elec_mwh_per_capita,a=e.nationalAverages.residential.gas_mcf_per_capita,n=t*re,i=a*oe;return Math.round(n+i)}},ue={fetchNationalAverages:function(e){var t=e.commit;return j().then(function(e){e.data&&e.data.result&&t("setNationalAverages",e.data.result)})}},le={setNationalAverages:function(e,t){e.nationalAverages=t}},be={state:se,getters:ce,actions:ue,mutations:le,namespaced:!0};n["a"].use(p["a"]);var he=new p["a"].Store({modules:{national:be}});n["a"].config.productionTip=!1,new n["a"]({router:ie,store:he,render:function(e){return e(u)}}).$mount("#app")},"5c0b":function(e,t,a){"use strict";var n=a("5e27"),i=a.n(n);i.a},"5e27":function(e,t,a){},6905:function(e,t,a){},7730:function(e,t,a){},"7ebe":function(e,t,a){"use strict";var n=a("6905"),i=a.n(n);i.a},"9db4":function(e,t,a){},bcc9:function(e,t,a){},c2c9:function(e,t,a){"use strict";var n=a("9db4"),i=a.n(n);i.a},c70f:function(e,t,a){},e4ce:function(e,t,a){"use strict";var n=a("7730"),i=a.n(n);i.a}});
//# sourceMappingURL=app.a3736a9d.js.map