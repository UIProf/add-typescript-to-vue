(function(t){function e(e){for(var n,i,s=e[0],c=e[1],u=e[2],l=0,b=[];l<s.length;l++)i=s[l],r[i]&&b.push(r[i][0]),r[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);h&&h(e);while(b.length)b.shift()();return o.push.apply(o,u||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,i=1;i<a.length;i++){var s=a[i];0!==r[s]&&(n=!1)}n&&(o.splice(e--,1),t=c(c.s=a[0]))}return t}var n={},i={app:0},r={app:0},o=[];function s(t){return c.p+"js/"+({about:"about"}[t]||t)+"."+{about:"7b3be9b3"}[t]+".js"}function c(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(t){var e=[],a={about:1};i[t]?e.push(i[t]):0!==i[t]&&a[t]&&e.push(i[t]=new Promise(function(e,a){for(var n="css/"+({about:"about"}[t]||t)+"."+{about:"b06dc82c"}[t]+".css",r=c.p+n,o=document.getElementsByTagName("link"),s=0;s<o.length;s++){var u=o[s],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===n||l===r))return e()}var b=document.getElementsByTagName("style");for(s=0;s<b.length;s++){u=b[s],l=u.getAttribute("data-href");if(l===n||l===r)return e()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=e,h.onerror=function(e){var n=e&&e.target&&e.target.src||r,o=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");o.request=n,delete i[t],h.parentNode.removeChild(h),a(o)},h.href=r;var m=document.getElementsByTagName("head")[0];m.appendChild(h)}).then(function(){i[t]=0}));var n=r[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise(function(e,a){n=r[t]=[e,a]});e.push(n[2]=o);var u,l=document.getElementsByTagName("head")[0],b=document.createElement("script");b.charset="utf-8",b.timeout=120,c.nc&&b.setAttribute("nonce",c.nc),b.src=s(t),u=function(e){b.onerror=b.onload=null,clearTimeout(h);var a=r[t];if(0!==a){if(a){var n=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src,o=new Error("Loading chunk "+t+" failed.\n("+n+": "+i+")");o.type=n,o.request=i,a[1](o)}r[t]=void 0}};var h=setTimeout(function(){u({type:"timeout",target:b})},12e4);b.onerror=b.onload=u,l.appendChild(b)}return Promise.all(e)},c.m=t,c.c=n,c.d=function(t,e,a){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(a,n,function(e){return t[e]}.bind(null,n));return a},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/add-typescript-to-vue/",c.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var b=0;b<u.length;b++)e(u[b]);var h=l;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"21bb":function(t,e,a){"use strict";var n=a("bcc9"),i=a.n(n);i.a},2423:function(t,e,a){"use strict";var n=a("c70f"),i=a.n(n);i.a},"4c71":function(t,e,a){"use strict";var n=a("e16b"),i=a.n(n);i.a},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("097d");var n=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("div",{attrs:{id:"nav"}},[a("router-link",{attrs:{to:"/"}},[t._v("Home")]),t._v("\n      "+t._s(" ")+"|\n      "),a("router-link",{attrs:{to:"/about"}},[t._v("About")])],1),a("router-view")],1)},r=[],o=(a("5c0b"),a("2877")),s={},c=Object(o["a"])(s,i,r,!1,null,null,null);c.options.__file="App.vue";var u=c.exports,l=a("8c4f"),b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("h1",{staticClass:"home__header"},[t._v("Search for Greenhouse Gas Emissions by City")]),a("Search")],1)},h=[],m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search"},[a("SearchBar",{attrs:{cities:t.cities},on:{cityAdded:t.addCity}}),a("SearchResultChart",{attrs:{cities:t.cities},on:{cityDeleted:t.deleteCity}})],1)},v=[],d=(a("f751"),a("7514"),a("be94")),p=a("2f62"),f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search-bar"},[a("div",{staticClass:"form-control"},[a("label",{staticClass:"form-control__label",attrs:{for:"city"}},[t._v("City")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.input.city,expression:"input.city",modifiers:{trim:!0}}],staticClass:"form-control__input",attrs:{type:"text",id:"city",placeholder:t.placeholder},domProps:{value:t.input.city},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.attemptSearch(e):null},input:[function(e){e.target.composing||t.$set(t.input,"city",e.target.value.trim())},t.isValidInput],blur:function(e){t.$forceUpdate()}}})]),a("div",{staticClass:"form-control"},[a("label",{staticClass:"form-control__label",attrs:{for:"state"}},[t._v("State")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.input.state,expression:"input.state"}],staticClass:"form-control__select",attrs:{name:"state",id:"state"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.input,"state",e.target.multiple?a:a[0])},t.isValidInput],keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.attemptSearch(e):null}}},t._l(t.states,function(e){return a("option",{key:e.abbreviation,domProps:{value:e.abbreviation}},[t._v(t._s(e.abbreviation))])}))]),a("button",{staticClass:"form-button",on:{click:t.attemptSearch}},[t._v("Get Emissions Data")]),a("br"),t.errorMessage?a("span",{staticClass:"error-message"},[t._v(t._s(t.errorMessage))]):t._e()])},g=[],y=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"residential",a=t.residential.total_pop,n=t[e],i=n.elec_lb_ghg,r=n.gas_lb_ghg,o=Math.round((i+r)/a);return o},_=function(t,e){return t.ghg/e},C=function(t,e){return(t.ghg-e)/e},A=(a("28a5"),function(t){return t.toLowerCase().split(" ").map(function(t){return t.charAt(0).toUpperCase()+t.substring(1)}).join(" ")}),M=a("bc3a"),S=a.n(M),N="https://developer.nrel.gov/api/cleap/v1",w="DEMO_KEY",O="aWcNiqkAVeFiCXyjO4p6QwNzMDnTxd2VTOmTMwtn",k=function(t,e){var a="energy_expenditures_and_ghg_by_sector",n=encodeURIComponent(t),i=encodeURIComponent(e);return S.a.get("".concat(N,"/").concat(a)+"?city=".concat(n)+"&state_abbr=".concat(i)+"&api_key=".concat(O||w))},j=function(){var t="electricity_and_gas_stats";return S.a.get("".concat(N,"/").concat(t)+"?api_key=".concat(O||w))},I=[{name:"Alabama",abbreviation:"AL"},{name:"Alaska",abbreviation:"AK"},{name:"American Samoa",abbreviation:"AS"},{name:"Arizona",abbreviation:"AZ"},{name:"Arkansas",abbreviation:"AR"},{name:"California",abbreviation:"CA"},{name:"Colorado",abbreviation:"CO"},{name:"Connecticut",abbreviation:"CT"},{name:"Delaware",abbreviation:"DE"},{name:"District Of Columbia",abbreviation:"DC"},{name:"Federated States Of Micronesia",abbreviation:"FM"},{name:"Florida",abbreviation:"FL"},{name:"Georgia",abbreviation:"GA"},{name:"Guam",abbreviation:"GU"},{name:"Hawaii",abbreviation:"HI"},{name:"Idaho",abbreviation:"ID"},{name:"Illinois",abbreviation:"IL"},{name:"Indiana",abbreviation:"IN"},{name:"Iowa",abbreviation:"IA"},{name:"Kansas",abbreviation:"KS"},{name:"Kentucky",abbreviation:"KY"},{name:"Louisiana",abbreviation:"LA"},{name:"Maine",abbreviation:"ME"},{name:"Marshall Islands",abbreviation:"MH"},{name:"Maryland",abbreviation:"MD"},{name:"Massachusetts",abbreviation:"MA"},{name:"Michigan",abbreviation:"MI"},{name:"Minnesota",abbreviation:"MN"},{name:"Mississippi",abbreviation:"MS"},{name:"Missouri",abbreviation:"MO"},{name:"Montana",abbreviation:"MT"},{name:"Nebraska",abbreviation:"NE"},{name:"Nevada",abbreviation:"NV"},{name:"New Hampshire",abbreviation:"NH"},{name:"New Jersey",abbreviation:"NJ"},{name:"New Mexico",abbreviation:"NM"},{name:"New York",abbreviation:"NY"},{name:"North Carolina",abbreviation:"NC"},{name:"North Dakota",abbreviation:"ND"},{name:"Northern Mariana Islands",abbreviation:"MP"},{name:"Ohio",abbreviation:"OH"},{name:"Oklahoma",abbreviation:"OK"},{name:"Oregon",abbreviation:"OR"},{name:"Palau",abbreviation:"PW"},{name:"Pennsylvania",abbreviation:"PA"},{name:"Puerto Rico",abbreviation:"PR"},{name:"Rhode Island",abbreviation:"RI"},{name:"South Carolina",abbreviation:"SC"},{name:"South Dakota",abbreviation:"SD"},{name:"Tennessee",abbreviation:"TN"},{name:"Texas",abbreviation:"TX"},{name:"Utah",abbreviation:"UT"},{name:"Vermont",abbreviation:"VT"},{name:"Virgin Islands",abbreviation:"VI"},{name:"Virginia",abbreviation:"VA"},{name:"Washington",abbreviation:"WA"},{name:"West Virginia",abbreviation:"WV"},{name:"Wisconsin",abbreviation:"WI"},{name:"Wyoming",abbreviation:"WY"}],x={name:"SearchBar",props:{cities:{type:Array,required:!0}},data:function(){return{input:{city:"",state:""},states:I,placeholder:"Enter City",errorMessage:"",submitAttempted:!1}},methods:{attemptSearch:function(){var t=this;this.isValidSubmit()&&k(this.input.city,this.input.state).then(function(e){var a=t.generateCityResponse(e);a?(t.emitCityAdded(a),t.clearInput()):t.errorMessage="No energy usage found for this city - please try again"}).catch(function(){t.errorMessage="No energy usage found for this city - please try again"})},isValidInput:function(){return this.submitAttempted?(this.input.city=this.input.city.trim(),this.input.city&&this.input.state?2!==this.input.state.length?(this.errorMessage="Please enter a valid state",!1):(this.errorMessage="",!0):(this.errorMessage="Please enter a city & state",!1)):(this.errorMessage="",!0)},isValidSubmit:function(){if(this.submitAttempted=!0,!this.isValidInput())return!1;var t=this.generateCityStateSlug(),e=t.slug,a=!!this.cities.find(function(t){return t.slug===e});return a?(this.errorMessage="City is already in results. Try searching for something new?",!1):(this.errorMessage="",!0)},generateCityStateSlug:function(){var t=this.input,e=t.city,a=t.state,n=e.toLowerCase(),i=A(n),r="".concat(n,"-").concat(a);return{lowerCaseCity:n,capitalizedCity:i,state:a,slug:r}},generateCityResponse:function(t){if(null!=t.data){var e=this.generateCityStateSlug(),a=e.capitalizedCity,n=e.state,i=e.slug;if(t.data.result&&t.data.result[a]){var r=t.data.result[a];return{slug:i,name:a,state:n,ghg:y(r)}}}},emitCityAdded:function(t){this.$emit("cityAdded",t)},clearInput:function(){this.input.city="",this.input.state="",this.errorMessage="",this.submitAttempted=!1}}},E=x,T=(a("c2c9"),Object(o["a"])(E,f,g,!1,null,null,null));T.options.__file="SearchBar.vue";var G=T.exports,P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h3",[t._v("annual lbs of greenhouse gases (GHG) per capita")]),a("transition-group",{attrs:{name:"search-result-chart",tag:"ul"}},t._l(t.sortedCities,function(e){return a("SearchResultChartItem",{key:e.slug,staticClass:"search-result-chart__item",attrs:{city:e,"cities-max-ghg":t.citiesMaxGhg},on:{cityDeleted:t.deleteCity}})}),1)],1)},R=[],D=(a("55dd"),a("5df3"),a("1c4c"),a("2909")),V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"search-result-chart-item",class:t.generateClass,style:t.generateStyle},[a("span",{staticClass:"item-label"},[t._v(t._s(t.label))]),a("span",{staticClass:"item-ghg"},[t._v(t._s(t.displayGhg))]),t.isNational?t._e():a("span",{staticClass:"delete-button",on:{click:t.deleteCity}},[a("span",[t._v("X")])])])},$=[],W=(a("7f7f"),a("c5f6"),"80vw"),B={name:"SearchResultChartItem",props:{city:{type:Object,required:!0},citiesMaxGhg:{type:Number,required:!0},isNationalAverage:{type:Boolean,required:!1,default:!1}},computed:Object(d["a"])({},Object(p["c"])("national",["nationalAverageGhg"]),{generateClass:function(){var t=.1,e=C(this.city,this.nationalAverageGhg);return e<-t?"significantly-below-average":e<=-t&&e<0?"slightly-below-average":e>0&&e<=t?"slightly-above-average":e>t?"significantly-above-average":""},generateStyle:function(){return{width:"calc(".concat(W," * ").concat(_(this.city,this.citiesMaxGhg),")")}},label:function(){return this.city.state?"".concat(this.city.name,", ").concat(this.city.state):this.city.name},displayGhg:function(){return"".concat(this.city.ghg," lbs")},isNational:function(){return"national"===this.city.slug}}),methods:{deleteCity:function(){this.$emit("cityDeleted",this.city.slug)}}},H=B,L=(a("2423"),Object(o["a"])(H,V,$,!1,null,"8266fbbe",null));L.options.__file="SearchResultChartItem.vue";var q=L.exports,K={name:"SearchResultChart",components:{SearchResultChartItem:q},props:{cities:{type:Array,required:!0}},computed:Object(d["a"])({},Object(p["c"])("national",["nationalAverageGhg"]),{citiesMaxGhg:function(){var t=this.cities.map(function(t){return t.ghg});return Math.max.apply(Math,Object(D["a"])(t))},sortedCities:function(){var t=Array.from(this.cities);return t.sort(function(t,e){return t.ghg-e.ghg})}}),methods:{deleteCity:function(t){this.$emit("cityDeleted",t)}}},U=K,F=(a("e4ce"),Object(o["a"])(U,P,R,!1,null,"f668d38a",null));F.options.__file="SearchResultChart.vue";var Y=F.exports,z={slug:"national",name:"National Average",ghg:null},J={name:"Search",components:{SearchBar:G,SearchResultChart:Y},data:function(){return{cities:[]}},computed:Object(d["a"])({},Object(p["c"])("national",["nationalAverageGhg"])),watch:{nationalAverageGhg:function(){this.addNationalAverageToCities()}},methods:Object(d["a"])({},Object(p["b"])("national",["fetchNationalAverages"]),{addNationalAverageToCities:function(){this.cities.find(function(t){return"national"===t.slug})||this.cities.push(Object.assign(z,{ghg:this.nationalAverageGhg}))},addCity:function(t){this.cities.push(t)},deleteCity:function(t){this.cities=this.cities.filter(function(e){return e.slug!==t})}}),mounted:function(){null==this.nationalAverageGhg?this.fetchNationalAverages():this.addNationalAverageToCities()}},X=J,Q=(a("4c71"),Object(o["a"])(X,m,v,!1,null,"0b04dcf1",null));Q.options.__file="Search.vue";var Z=Q.exports,tt={name:"home",components:{Search:Z}},et=tt,at=(a("21bb"),Object(o["a"])(et,b,h,!1,null,null,null));at.options.__file="Home.vue";var nt=at.exports;n["a"].use(l["a"]);var it=new l["a"]({mode:"history",base:"/add-typescript-to-vue/",routes:[{path:"/",name:"home",component:nt},{path:"/about",name:"about",component:function(){return a.e("about").then(a.bind(null,"f820"))}}]}),rt=4542.3/3,ot=120.04,st={nationalAverages:null},ct={nationalAverageGhg:function(t){if(null==t.nationalAverages)return null;var e=t.nationalAverages.residential.elec_mwh_per_capita,a=t.nationalAverages.residential.gas_mcf_per_capita,n=e*rt,i=a*ot;return Math.round(n+i)}},ut={fetchNationalAverages:function(t){var e=t.commit;return j().then(function(t){t.data&&t.data.result&&e("setNationalAverages",t.data.result)})}},lt={setNationalAverages:function(t,e){t.nationalAverages=e}},bt={state:st,getters:ct,actions:ut,mutations:lt,namespaced:!0};n["a"].use(p["a"]);var ht=new p["a"].Store({modules:{national:bt}});n["a"].config.productionTip=!1,new n["a"]({router:it,store:ht,render:function(t){return t(u)}}).$mount("#app")},"5c0b":function(t,e,a){"use strict";var n=a("5e27"),i=a.n(n);i.a},"5e27":function(t,e,a){},7730:function(t,e,a){},"9db4":function(t,e,a){},bcc9:function(t,e,a){},c2c9:function(t,e,a){"use strict";var n=a("9db4"),i=a.n(n);i.a},c70f:function(t,e,a){},e16b:function(t,e,a){},e4ce:function(t,e,a){"use strict";var n=a("7730"),i=a.n(n);i.a}});
//# sourceMappingURL=app.1caf9206.js.map